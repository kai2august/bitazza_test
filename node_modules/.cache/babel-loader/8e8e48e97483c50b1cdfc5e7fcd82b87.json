{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport { Component } from 'react';\n\nvar NewsAdd =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewsAdd, _Component);\n\n  function NewsAdd(props) {\n    var _this;\n\n    _classCallCheck(this, NewsAdd);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsAdd).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submitClick\", function () {\n      console.log(_this.state);\n\n      var inst = _assertThisInitialized(_this);\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var uploadAllImage, res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(inst.state.images.length > 0)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                uploadAllImage = inst.state.images.map(\n                /*#__PURE__*/\n                function () {\n                  var _ref2 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee(image) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            return _context.abrupt(\"return\", new _Promise(function (resolve, reject) {\n                              var formData = new FormData();\n                              var file = image.fileUpload;\n                              formData.append('image', file);\n                              var xhr = new XMLHttpRequest();\n\n                              xhr.onreadystatechange = function () {\n                                if (xhr.readyState === 4) {\n                                  var response = JSON.parse(xhr.response);\n\n                                  if (response.result === true) {\n                                    delete image.fileUpload;\n                                    resolve(_objectSpread({}, image, {\n                                      url: response.data.url\n                                    }));\n                                  }\n\n                                  reject(image);\n                                }\n                              };\n\n                              xhr.open('post', '/upload', true);\n                              xhr.send(formData);\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                _context2.next = 4;\n                return _Promise.all(uploadAllImage);\n\n              case 4:\n                res = _context2.sent;\n                console.log(res);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))(_assertThisInitialized(_this));\n    });\n\n    _this.state = {\n      title: '',\n      images: [],\n      description: ''\n    };\n    return _this;\n  }\n\n  _createClass(NewsAdd, [{\n    key: \"handleUpload\",\n    value: function () {\n      var _handleUpload = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(e) {\n        var images, filesUpload, allImages, data;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                images = this.state.images;\n                filesUpload = e.target.files;\n                allImages = _Object$keys(filesUpload).map(\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee3(key) {\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            return _context3.abrupt(\"return\", new _Promise(function (resolve, reject) {\n                              var reader = new FileReader();\n                              reader.readAsDataURL(filesUpload[key]);\n\n                              reader.onload = function () {\n                                var dataURI = reader.result;\n                                var base64 = dataURI.replace(/^[^,]+,/, '');\n                                var byteCharacters = atob(base64);\n                                var byteNumbers = new Uint8Array(byteCharacters.length);\n\n                                for (var i = 0; i < byteCharacters.length; i++) {\n                                  byteNumbers[i] = byteCharacters.charCodeAt(i);\n                                }\n\n                                var blob = new Blob([byteNumbers], {\n                                  type: 'image/jpeg'\n                                });\n                                var urlCreator = window.URL || window.webkitURL;\n                                var imageUrl = urlCreator.createObjectURL(blob);\n                                var imageDetail = {\n                                  url: imageUrl,\n                                  fileUpload: filesUpload[key]\n                                };\n                                resolve(imageDetail);\n                              };\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x3) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                _context4.next = 5;\n                return _Promise.all(allImages);\n\n              case 5:\n                data = _context4.sent;\n                this.setState({\n                  images: images.concat(data)\n                });\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handleUpload(_x2) {\n        return _handleUpload.apply(this, arguments);\n      }\n\n      return handleUpload;\n    }()\n  }, {\n    key: \"renderImages\",\n    value: function renderImages() {\n      var _this2 = this;\n\n      var images = this.state.images;\n\n      if (this.state.images.length > 0) {\n        return this.state.images.map(function (image, index) {\n          return React.createElement(\"div\", {\n            key: image.url\n          }, React.createElement(\"img\", {\n            src: image.url,\n            width: 100\n          }), React.createElement(\"br\", null), React.createElement(\"button\", {\n            onClick: function onClick() {\n              images.splice(index, 1);\n\n              _this2.setState({\n                images: images\n              });\n            }\n          }, \"Delete\"));\n        });\n      } else {\n        return React.createElement(\"input\", {\n          type: \"file\",\n          name: \"uploadAwsS3\",\n          onChange: this.handleUpload.bind(this),\n          accept: \"image/*\"\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"jsx-654046657\" + \" \" + \"content_box\"\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n        },\n        className: \"jsx-654046657\"\n      }, React.createElement(\"table\", {\n        border: \"0\",\n        align: \"center\",\n        cellPadding: \"8\",\n        cellSpacing: \"0\",\n        className: \"jsx-654046657\"\n      }, React.createElement(\"tbody\", {\n        className: \"jsx-654046657\"\n      }, React.createElement(\"tr\", {\n        className: \"jsx-654046657\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-654046657\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-654046657\" + \" \" + \"fdesc\"\n      }, \"Title\"), React.createElement(\"input\", {\n        name: \"title\",\n        type: \"text\",\n        maxLength: \"16\",\n        onChange: function onChange(e) {\n          return _this3.handleChange(e);\n        },\n        className: \"jsx-654046657\" + \" \" + \"tf\"\n      }))), React.createElement(\"tr\", {\n        className: \"jsx-654046657\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-654046657\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-654046657\" + \" \" + \"fdesc\"\n      }, \"Cover Image\"), React.createElement(\"div\", {\n        id: \"showPreviewUpload\",\n        className: \"jsx-654046657\"\n      }, this.renderImages()))), React.createElement(\"tr\", {\n        className: \"jsx-654046657\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-654046657\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-654046657\" + \" \" + \"fdesc\"\n      }, \"Description\"), React.createElement(\"textarea\", {\n        name: \"description\",\n        cols: \"\",\n        rows: \"5\",\n        wrap: \"virtual\",\n        onChange: function onChange(e) {\n          return _this3.handleChange(e);\n        },\n        className: \"jsx-654046657\" + \" \" + \"ta\"\n      }))), React.createElement(\"tr\", {\n        className: \"jsx-654046657\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-654046657\"\n      }, React.createElement(\"a\", {\n        onClick: this.submitClick,\n        className: \"jsx-654046657\" + \" \" + \"submit_button\"\n      }, \"Submit\")))))), React.createElement(_JSXStyle, {\n        id: \"654046657\"\n      }, \".content_box.jsx-654046657{height:calc(100% - 60px);padding:8px;}.submit_button.jsx-654046657{padding:4px 12px 4px 12px;background-color:#006;color:#FFF;border-radius:8px;cursor:pointer;}.tf.jsx-654046657{width:300px;font-size:15px;padding:4px 12px 4px 12px;border-radius:8px;}.ta.jsx-654046657{width:300px;font-size:15px;padding:4px 12px 4px 12px;}.fdesc.jsx-654046657{font-size:13px;color:#999999;margin:4px 0px 4px 0px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYWkvRGVza3RvcC9iaXRhenphL2JpdGF6emFfdGVzdC9wYWdlcy9hZG1pbi9uZXdzX2FkZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyTG9CLEFBR3lDLEFBSUMsQUFPZCxBQU1BLEFBS0csWUFWQSxBQU1BLEdBS0QsVUF0QkYsQ0FJVSxDQVFJLEFBTUEsRUFLSCxRQXRCMUIsV0FJYyxJQW1CZCxDQVhxQixBQU1yQixNQWJxQixZQVFyQixNQVBrQixlQUNsQiIsImZpbGUiOiIvVXNlcnMva2FpL0Rlc2t0b3AvYml0YXp6YS9iaXRhenphX3Rlc3QvcGFnZXMvYWRtaW4vbmV3c19hZGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcblxuY2xhc3MgTmV3c0FkZCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgaW1hZ2VzOiBbXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgXG4gICAgYXN5bmMgaGFuZGxlVXBsb2FkIChlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHRoaXMuc3RhdGUuaW1hZ2VzO1xuICAgICAgICBjb25zdCBmaWxlc1VwbG9hZCA9IGUudGFyZ2V0LmZpbGVzO1xuICAgICAgICBjb25zdCBhbGxJbWFnZXMgPSBPYmplY3Qua2V5cyhmaWxlc1VwbG9hZCkubWFwKGFzeW5jIGtleSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlc1VwbG9hZFtrZXldKVxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGRhdGFVUkkgPSByZWFkZXIucmVzdWx0XG4gICAgICAgICAgICAgIGxldCBiYXNlNjQgPSBkYXRhVVJJLnJlcGxhY2UoL15bXixdKywvLCAnJylcbiAgICAgICAgICAgICAgbGV0IGJ5dGVDaGFyYWN0ZXJzID0gYXRvYihiYXNlNjQpXG4gICAgICAgICAgICAgIGxldCBieXRlTnVtYmVycyA9IG5ldyBVaW50OEFycmF5KGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aClcblxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYnl0ZU51bWJlcnNbaV0gPSBieXRlQ2hhcmFjdGVycy5jaGFyQ29kZUF0KGkpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbYnl0ZU51bWJlcnNdLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KVxuICAgICAgICAgICAgICBsZXQgdXJsQ3JlYXRvciA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTFxuICAgICAgICAgICAgICBsZXQgaW1hZ2VVcmwgPSB1cmxDcmVhdG9yLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgICAgICAgICBsZXQgaW1hZ2VEZXRhaWwgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiBpbWFnZVVybCxcbiAgICAgICAgICAgICAgICBmaWxlVXBsb2FkOiBmaWxlc1VwbG9hZFtrZXldXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVzb2x2ZShpbWFnZURldGFpbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoYWxsSW1hZ2VzKVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW1hZ2VzOiBpbWFnZXMuY29uY2F0KGRhdGEpIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJlbmRlckltYWdlcyAoKSB7XG4gICAgICAgIGNvbnN0IHsgaW1hZ2VzIH0gPSB0aGlzLnN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaW1hZ2VzLm1hcCgoaW1hZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW1hZ2UudXJsfT5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2UudXJsfSB3aWR0aD17MTAwfSAvPlxuICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpbWFnZXMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW1hZ2VzfSlcbiAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgIERlbGV0ZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J2ZpbGUnXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9J3VwbG9hZEF3c1MzJyBcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVXBsb2FkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgIGFjY2VwdD0naW1hZ2UvKidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgc3VibWl0Q2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUpO1xuICAgICAgICBsZXQgaW5zdCA9IHRoaXM7XG4gICAgICAgIChcbiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy90cnkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmKGluc3Quc3RhdGUuaW1hZ2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkQWxsSW1hZ2UgPSBpbnN0LnN0YXRlLmltYWdlcy5tYXAoYXN5bmMgaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBpbWFnZS5maWxlVXBsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGZpbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGltYWdlLmZpbGVVcGxvYWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsuLi5pbWFnZSwgdXJsOiByZXNwb25zZS5kYXRhLnVybH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbigncG9zdCcsICcvdXBsb2FkJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gYXdhaXQgUHJvbWlzZS5hbGwodXBsb2FkQWxsSW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudGl0bGUgPSBpbnN0LnN0YXRlLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5kZXNjcmlwdGlvbiA9IGluc3Quc3RhdGUuZGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIGlmKGluc3Quc3RhdGUuaW1hZ2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgQVdTLmNvbmZpZy5hY2Nlc3NLZXlJZCA9IHByb2Nlc3MuZW52LlMzX0FDQ0VTU0tFWV9JRFxuICAgICAgICAgICAgICAgICAgICAgICAgQVdTLmNvbmZpZy5zZWNyZXRBY2Nlc3NLZXkgPSBwcm9jZXNzLmVudi5TM19TRUNSRVRfQUNDRVNTX0tFWVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gaW1hZ2UuZmlsZVVwbG9hZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhSW1hZ2UgPSBhd2FpdCByZWFkRmlsZVByb21pc2UoZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMzUmVzcG9uc2UgPSBhd2FpdCB1cGxvYWRUb1MzUHJvbWlzZSh7QnVja2V0OiBwcm9jZXNzLmVudi5TM19CVUNLRVQsIEtleTogYCR7ZmlsZS5maWxlbmFtZX1gLCBCb2R5OiBkYXRhSW1hZ2V9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdW5saW5rUHJvbWlzZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNvdmVyX2ltYWdlID0gczNSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY292ZXJfaW1hZ2UgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dCk7XG4qL1xuICAgICAgICAgICAgICAgIC8vfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0ltcGxlbWVudGF0aW9uIG9yIE5ldHdvcmsgZXJyb3IuJylcbiAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgIH1cbiAgICAgICAgKSh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgcmVuZGVyICgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRfYm94XCI+XG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgICAgIDx0YWJsZSBib3JkZXI9XCIwXCIgYWxpZ249XCJjZW50ZXJcIiBjZWxsUGFkZGluZz1cIjhcIiBjZWxsU3BhY2luZz1cIjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGFsaWduPVwibGVmdFwiIHZhbGlnbj1cInRvcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmRlc2NcIj5UaXRsZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInRpdGxlXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRmXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD1cIjE2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5oYW5kbGVDaGFuZ2UoZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgYWxpZ249XCJsZWZ0XCIgdmFsaWduPVwidG9wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZGVzY1wiPkNvdmVyIEltYWdlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nc2hvd1ByZXZpZXdVcGxvYWQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJJbWFnZXMoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgYWxpZ249XCJsZWZ0XCIgdmFsaWduPVwidG9wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZGVzY1wiPkRlc2NyaXB0aW9uPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29scz1cIlwiIHJvd3M9XCI1XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA9XCJ2aXJ0dWFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5oYW5kbGVDaGFuZ2UoZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGFsaWduPVwibGVmdFwiIHZhbGlnbj1cInRvcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e3RoaXMuc3VibWl0Q2xpY2t9IGNsYXNzTmFtZT1cInN1Ym1pdF9idXR0b25cIj5TdWJtaXQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAuY29udGVudF9ib3h7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OmNhbGMoMTAwJSAtIDYwcHgpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6OHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnN1Ym1pdF9idXR0b257XG4gICAgICAgICAgICAgICAgcGFkZGluZzo0cHggMTJweCA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMwMDY7IFxuICAgICAgICAgICAgICAgIGNvbG9yOiNGRkY7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7XG4gICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAudGZ7XG4gICAgICAgICAgICAgICAgd2lkdGg6MzAwcHg7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOjE1cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzo0cHggMTJweCA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjhweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC50YXtcbiAgICAgICAgICAgICAgICB3aWR0aDozMDBweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6MTVweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOjRweCAxMnB4IDRweCAxMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmZkZXNje1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxM3B4O1xuICAgICAgICAgICAgICAgIGNvbG9yOiM5OTk5OTk7XG4gICAgICAgICAgICAgICAgbWFyZ2luOjRweCAwcHggNHB4IDBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmV3c0FkZCJdfQ== */\\n/*@ sourceURL=/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_add.js */\"));\n    }\n  }]);\n\n  return NewsAdd;\n}(Component);\n\nexport default NewsAdd;","map":{"version":3,"sources":["/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_add.js"],"names":["Component","NewsAdd","props","e","setState","target","name","value","console","log","state","inst","images","length","uploadAllImage","map","image","resolve","reject","formData","FormData","file","fileUpload","append","xhr","XMLHttpRequest","onreadystatechange","readyState","response","JSON","parse","result","url","data","open","send","all","res","title","description","filesUpload","files","allImages","key","reader","FileReader","readAsDataURL","onload","dataURI","base64","replace","byteCharacters","atob","byteNumbers","Uint8Array","i","charCodeAt","blob","Blob","type","urlCreator","window","URL","webkitURL","imageUrl","createObjectURL","imageDetail","concat","index","splice","handleUpload","bind","preventDefault","handleChange","renderImages","submitClick"],"mappings":";;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;;IAEMC,O;;;;;AAEF,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,iFAAMA,KAAN;;AADe,mEASJ,UAACC,CAAD,EAAO;AAClB,YAAKC,QAAL,qBACKD,CAAC,CAACE,MAAF,CAASC,IADd,EACqBH,CAAC,CAACE,MAAF,CAASE,KAD9B;AAGH,KAbkB;;AAAA,kEA2EL,YAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;;AACA,UAAIC,IAAI,gCAAR;;AACA;AAAA;AAAA,+BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGWA,IAAI,CAACD,KAAL,CAAWE,MAAX,CAAkBC,MAAlB,GAA2B,CAHtC;AAAA;AAAA;AAAA;;AAIkBC,gBAAAA,cAJlB,GAImCH,IAAI,CAACD,KAAL,CAAWE,MAAX,CAAkBG,GAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,2CAAsB,iBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA,6DACpC,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,kCAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACA,kCAAIC,IAAI,GAAGL,KAAK,CAACM,UAAjB;AACAH,8BAAAA,QAAQ,CAACI,MAAT,CAAgB,OAAhB,EAAyBF,IAAzB;AACA,kCAAIG,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,8BAAAA,GAAG,CAACE,kBAAJ,GAAyB,YAAY;AACnC,oCAAIF,GAAG,CAACG,UAAJ,KAAmB,CAAvB,EAA0B;AACxB,sCAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACI,QAAf,CAAjB;;AACA,sCAAIA,QAAQ,CAACG,MAAT,KAAoB,IAAxB,EAA8B;AAC5B,2CAAOf,KAAK,CAACM,UAAb;AACAL,oCAAAA,OAAO,mBAAKD,KAAL;AAAYgB,sCAAAA,GAAG,EAAEJ,QAAQ,CAACK,IAAT,CAAcD;AAA/B,uCAAP;AACD;;AACDd,kCAAAA,MAAM,CAACF,KAAD,CAAN;AACD;AACF,+BATD;;AAUAQ,8BAAAA,GAAG,CAACU,IAAJ,CAAS,MAAT,EAAiB,SAAjB,EAA4B,IAA5B;AACAV,8BAAAA,GAAG,CAACW,IAAJ,CAAShB,QAAT;AACD,6BAjBM,CADoC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAtB;;AAAA;AAAA;AAAA;AAAA,oBAJnC;AAAA;AAAA,uBAwB4B,SAAQiB,GAAR,CAAYtB,cAAZ,CAxB5B;;AAAA;AAwBgBuB,gBAAAA,GAxBhB;AAyBY7B,gBAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;;AAzBZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAuDH,KArIkB;;AAEf,UAAK3B,KAAL,GAAa;AACT4B,MAAAA,KAAK,EAAE,EADE;AAET1B,MAAAA,MAAM,EAAE,EAFC;AAGT2B,MAAAA,WAAW,EAAE;AAHJ,KAAb;AAFe;AAOlB;;;;;;;iDAQmBpC,C;;;;;;AACVS,gBAAAA,M,GAAS,KAAKF,KAAL,CAAWE,M;AACpB4B,gBAAAA,W,GAAcrC,CAAC,CAACE,MAAF,CAASoC,K;AACvBC,gBAAAA,S,GAAY,aAAYF,WAAZ,EAAyBzB,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,2CAA6B,kBAAM4B,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA,8DACtC,aAAY,UAAC1B,OAAD,EAAUC,MAAV,EAAqB;AACtC,kCAAI0B,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,8BAAAA,MAAM,CAACE,aAAP,CAAqBN,WAAW,CAACG,GAAD,CAAhC;;AACAC,8BAAAA,MAAM,CAACG,MAAP,GAAgB,YAAM;AACpB,oCAAIC,OAAO,GAAGJ,MAAM,CAACb,MAArB;AACA,oCAAIkB,MAAM,GAAGD,OAAO,CAACE,OAAR,CAAgB,SAAhB,EAA2B,EAA3B,CAAb;AACA,oCAAIC,cAAc,GAAGC,IAAI,CAACH,MAAD,CAAzB;AACA,oCAAII,WAAW,GAAG,IAAIC,UAAJ,CAAeH,cAAc,CAACtC,MAA9B,CAAlB;;AAEA,qCAAK,IAAI0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,cAAc,CAACtC,MAAnC,EAA2C0C,CAAC,EAA5C,EAAgD;AAC9CF,kCAAAA,WAAW,CAACE,CAAD,CAAX,GAAiBJ,cAAc,CAACK,UAAf,CAA0BD,CAA1B,CAAjB;AACD;;AACD,oCAAIE,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACL,WAAD,CAAT,EAAwB;AAAEM,kCAAAA,IAAI,EAAE;AAAR,iCAAxB,CAAX;AACA,oCAAIC,UAAU,GAAGC,MAAM,CAACC,GAAP,IAAcD,MAAM,CAACE,SAAtC;AACA,oCAAIC,QAAQ,GAAGJ,UAAU,CAACK,eAAX,CAA2BR,IAA3B,CAAf;AACA,oCAAIS,WAAW,GAAG;AAChBlC,kCAAAA,GAAG,EAAEgC,QADW;AAEhB1C,kCAAAA,UAAU,EAAEkB,WAAW,CAACG,GAAD;AAFP,iCAAlB;AAIA1B,gCAAAA,OAAO,CAACiD,WAAD,CAAP;AACD,+BAjBD;AAkBD,6BArBM,CADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA7B;;AAAA;AAAA;AAAA;AAAA,oB;;uBAwBC,SAAQ9B,GAAR,CAAYM,SAAZ,C;;;AAAbT,gBAAAA,I;AACN,qBAAK7B,QAAL,CAAc;AAAEQ,kBAAAA,MAAM,EAAEA,MAAM,CAACuD,MAAP,CAAclC,IAAd;AAAV,iBAAd;;;;;;;;;;;;;;;;;;mCAGc;AAAA;;AAAA,UACNrB,MADM,GACK,KAAKF,KADV,CACNE,MADM;;AAEd,UAAI,KAAKF,KAAL,CAAWE,MAAX,CAAkBC,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,eAAO,KAAKH,KAAL,CAAWE,MAAX,CAAkBG,GAAlB,CAAsB,UAACC,KAAD,EAAQoD,KAAR,EAAkB;AAC7C,iBACE;AAAK,YAAA,GAAG,EAAEpD,KAAK,CAACgB;AAAhB,aACE;AAAK,YAAA,GAAG,EAAEhB,KAAK,CAACgB,GAAhB;AAAqB,YAAA,KAAK,EAAE;AAA5B,YADF,EAEE,+BAFF,EAGE;AAAQ,YAAA,OAAO,EAAE,mBAAM;AACrBpB,cAAAA,MAAM,CAACyD,MAAP,CAAcD,KAAd,EAAqB,CAArB;;AACA,cAAA,MAAI,CAAChE,QAAL,CAAc;AAACQ,gBAAAA,MAAM,EAANA;AAAD,eAAd;AACD;AAHD,sBAHF,CADF;AAYD,SAbM,CAAP;AAcD,OAfD,MAeK;AACD,eACI;AACI,UAAA,IAAI,EAAC,MADT;AAEI,UAAA,IAAI,EAAC,aAFT;AAGI,UAAA,QAAQ,EAAE,KAAK0D,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAHd;AAII,UAAA,MAAM,EAAC;AAJX,UADJ;AAQH;AACF;;;6BA8DO;AAAA;;AACR,aACM;AAAA,2CAAe;AAAf,SACI;AAAM,QAAA,QAAQ,EAAE,kBAAApE,CAAC,EAAI;AACbA,UAAAA,CAAC,CAACqE,cAAF;AACD,SAFP;AAAA;AAAA,SAGI;AAAO,QAAA,MAAM,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAC,QAAxB;AAAiC,QAAA,WAAW,EAAC,GAA7C;AAAiD,QAAA,WAAW,EAAC,GAA7D;AAAA;AAAA,SACE;AAAA;AAAA,SACA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,iBADJ,EAEI;AACI,QAAA,IAAI,EAAC,OADT;AAEI,QAAA,IAAI,EAAC,MAFT;AAII,QAAA,SAAS,EAAC,IAJd;AAKI,QAAA,QAAQ,EAAE,kBAAArE,CAAC;AAAA,iBAAI,MAAI,CAACsE,YAAL,CAAkBtE,CAAlB,CAAJ;AAAA,SALf;AAAA,2CAGc;AAHd,QAFJ,CADF,CADA,EAaA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,uBADJ,EAEI;AAAK,QAAA,EAAE,EAAC,mBAAR;AAAA;AAAA,SACK,KAAKuE,YAAL,EADL,CAFJ,CADF,CAbA,EAqBA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,uBADJ,EAEI;AACI,QAAA,IAAI,EAAC,aADT;AAGI,QAAA,IAAI,EAAC,EAHT;AAGY,QAAA,IAAI,EAAC,GAHjB;AAII,QAAA,IAAI,EAAC,SAJT;AAKI,QAAA,QAAQ,EAAE,kBAAAvE,CAAC;AAAA,iBAAI,MAAI,CAACsE,YAAL,CAAkBtE,CAAlB,CAAJ;AAAA,SALf;AAAA,2CAEc;AAFd,QAFJ,CADF,CArBA,EAiCA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAG,QAAA,OAAO,EAAE,KAAKwE,WAAjB;AAAA,2CAAwC;AAAxC,kBADJ,CADF,CAjCA,CADF,CAHJ,CADJ;AAAA;AAAA,2tXADN;AA8ED;;;;EAxNiB3E,S;;AA2NtB,eAAeC,OAAf","sourcesContent":["import { Component } from 'react'\n\nclass NewsAdd extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            title: '',\n            images: [],\n            description: ''\n        };\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    };\n    \n    async handleUpload (e) {\n        const images = this.state.images;\n        const filesUpload = e.target.files;\n        const allImages = Object.keys(filesUpload).map(async key => {\n          return new Promise((resolve, reject) => {\n            let reader = new FileReader()\n            reader.readAsDataURL(filesUpload[key])\n            reader.onload = () => {\n              let dataURI = reader.result\n              let base64 = dataURI.replace(/^[^,]+,/, '')\n              let byteCharacters = atob(base64)\n              let byteNumbers = new Uint8Array(byteCharacters.length)\n\n              for (var i = 0; i < byteCharacters.length; i++) {\n                byteNumbers[i] = byteCharacters.charCodeAt(i)\n              }\n              let blob = new Blob([byteNumbers], { type: 'image/jpeg' })\n              let urlCreator = window.URL || window.webkitURL\n              let imageUrl = urlCreator.createObjectURL(blob)\n              let imageDetail = {\n                url: imageUrl,\n                fileUpload: filesUpload[key]\n              }\n              resolve(imageDetail)\n            }\n          })\n        })\n        const data = await Promise.all(allImages)\n        this.setState({ images: images.concat(data) })\n      }\n      \n      renderImages () {\n        const { images } = this.state\n        if (this.state.images.length > 0) {\n          return this.state.images.map((image, index) => {\n            return (\n              <div key={image.url}>\n                <img src={image.url} width={100} />\n                <br/>\n                <button onClick={() => {\n                  images.splice(index, 1)\n                  this.setState({images})\n                }}>\n                  Delete\n                </button>\n              </div>\n            )\n          })\n        }else{\n            return (\n                <input\n                    type='file'\n                    name='uploadAwsS3' \n                    onChange={this.handleUpload.bind(this)}\n                    accept='image/*'\n                />\n            )\n        }\n      }\n    \n    submitClick = () => {\n        console.log(this.state);\n        let inst = this;\n        (\n            async function(){\n                //try {\n            \n                    if(inst.state.images.length > 0){\n                        const uploadAllImage = inst.state.images.map(async image => {\n                          return new Promise((resolve, reject) => {\n                            let formData = new FormData()\n                            let file = image.fileUpload\n                            formData.append('image', file)\n                            let xhr = new XMLHttpRequest()\n                            xhr.onreadystatechange = function () {\n                              if (xhr.readyState === 4) {\n                                const response = JSON.parse(xhr.response)\n                                if (response.result === true) {\n                                  delete image.fileUpload\n                                  resolve({...image, url: response.data.url})\n                                }\n                                reject(image)\n                              }\n                            }\n                            xhr.open('post', '/upload', true)\n                            xhr.send(formData)\n                          })\n                        })\n                        var res = await Promise.all(uploadAllImage);\n                        console.log(res);\n                    }\n        /*\n                    var input = {};\n                    input.title = inst.state.title;\n                    input.description = inst.state.description;\n                    if(inst.state.images.length > 0){\n                        AWS.config.accessKeyId = process.env.S3_ACCESSKEY_ID\n                        AWS.config.secretAccessKey = process.env.S3_SECRET_ACCESS_KEY\n\n                        file = image.fileUpload;\n\n                        try {\n                            const dataImage = await readFilePromise(file.path)\n                            const s3Response = await uploadToS3Promise({Bucket: process.env.S3_BUCKET, Key: `${file.filename}`, Body: dataImage})\n\n                            await unlinkPromise(file.path);\n                            input.cover_image = s3Response;\n                        } catch (error) {\n                            input.cover_image = '';\n                        }\n                    }\n                    console.log(input);\n*/\n                //} catch (error) {\n                  //console.log('Implementation or Network error.')\n                //}\n            }\n        )(this);\n    }\n    \n    render () {\n      return (\n            <div className=\"content_box\">\n                <form onSubmit={e => {\n                        e.preventDefault()\n                      }}>\n                    <table border=\"0\" align=\"center\" cellPadding=\"8\" cellSpacing=\"0\">\n                      <tbody>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Title</div>\n                            <input \n                                name=\"title\" \n                                type=\"text\" \n                                className=\"tf\" \n                                maxLength=\"16\"\n                                onChange={e => this.handleChange(e)}\n                            />\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Cover Image</div>\n                            <div id='showPreviewUpload'>\n                                {this.renderImages()}\n                            </div>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Description</div>\n                            <textarea \n                                name=\"description\" \n                                className=\"ta\" \n                                cols=\"\" rows=\"5\" \n                                wrap=\"virtual\"\n                                onChange={e => this.handleChange(e)}\n                            ></textarea>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <a onClick={this.submitClick} className=\"submit_button\">Submit</a>\n                        </td>\n                      </tr>\n                      </tbody>\n                    </table>\n              </form>\n        <style jsx>{`\n            .content_box{\n                height:calc(100% - 60px);\n                padding:8px;\n            }\n            .submit_button{\n                padding:4px 12px 4px 12px;\n                background-color:#006; \n                color:#FFF;\n                border-radius:8px;\n                cursor:pointer;\n            }\n            .tf{\n                width:300px;\n                font-size:15px;\n                padding:4px 12px 4px 12px;\n                border-radius:8px;\n            }\n            .ta{\n                width:300px;\n                font-size:15px;\n                padding:4px 12px 4px 12px;\n            }\n            .fdesc{\n                font-size:13px;\n                color:#999999;\n                margin:4px 0px 4px 0px;\n            }\n        `}</style>\n            </div>\n      );\n    }\n}\n\nexport default NewsAdd"]},"metadata":{},"sourceType":"module"}