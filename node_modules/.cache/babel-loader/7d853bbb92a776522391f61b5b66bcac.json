{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport { Component } from 'react';\nimport Link from 'next/link';\nimport jsCookie from 'js-cookie';\nimport qs from 'querystring';\n\nvar NewsList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewsList, _Component);\n\n  function NewsList(props) {\n    var _this;\n\n    _classCallCheck(this, NewsList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsList).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"updateItems\", function () {\n      console.log('here15');\n      console.log(_this.state.items);\n      console.log(_this.state.dates);\n      console.log('here16');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getList\", function () {\n      var inst = _assertThisInitialized(_this);\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var date_filter, response, _ref2, output, ndates, i, item, item_dt;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                //try {\n                date_filter = jsCookie.get('date_filter');\n\n                if (typeof date_filter == 'undefined') {\n                  date_filter = 0;\n                  jsCookie.set('date_filter', '0');\n                }\n\n                _context.next = 4;\n                return window.fetch('/news?date_filter={date_filter}', {\n                  method: 'get',\n                  headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n                  }\n                });\n\n              case 4:\n                response = _context.sent;\n\n                if (!response.ok) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 8;\n                return response.json();\n\n              case 8:\n                _ref2 = _context.sent;\n                output = _ref2.output;\n\n                if (output.status) {\n                  inst.setState({\n                    items: output.result\n                  });\n                  ndates = ['All'];\n\n                  if (date_filter == '0' && inst.state.items.length > 0) {\n                    for (i = 0; i < inst.state.items.length; i++) {\n                      item = inst.state.items[i];\n                      item_dt = item.publish_date.replace(/T/, ' ').replace(/\\..+/, '').split(' ');\n\n                      if (ndates.indexOf(item_dt[0]) == -1) {\n                        ndates.push(item_dt[0]);\n                      }\n                    }\n\n                    inst.setState({\n                      dates: ndates\n                    });\n                    console.log('here14');\n                  }\n\n                  inst.updateItems();\n                } else {\n                  console.log('List News failed.');\n                }\n\n                _context.next = 14;\n                break;\n\n              case 13:\n                console.log('List News failed.');\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))(_assertThisInitialized(_this));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      if (e.target.name == 'date_filter') {\n        jsCookie.set('date_filter', e.target.value);\n        window.location.href = '/admin';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addNewsClick\", function () {\n      jsCookie.set('action', 'add_news');\n      window.location.href = '/admin';\n    });\n\n    _this.state = {\n      items: [],\n      dates: ['All']\n    };\n    jsCookie.set('date_filter', '0');\n    return _this;\n  }\n\n  _createClass(NewsList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"content_box\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"content_page\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"table_header\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"filter_box\"\n      }, React.createElement(\"select\", {\n        name: \"date_filter\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e);\n        },\n        className: \"jsx-2066798145\" + \" \" + \"myselect\"\n      }, this.state.dates && this.state.dates.length > 0 && this.state.dates.map(function (k, v) {\n        if (k != 'All') {\n          return React.createElement(\"option\", {\n            value: \"{k}\",\n            className: \"jsx-2066798145\"\n          }, k);\n        } else {\n          return React.createElement(\"option\", {\n            value: \"0\",\n            className: \"jsx-2066798145\"\n          }, \"All\");\n        }\n      }))), React.createElement(\"div\", {\n        onClick: this.addNewsClick,\n        className: \"jsx-2066798145\" + \" \" + \"add_but\"\n      }, \"+ Add News\"), React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"clear\"\n      })), React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"clear\"\n      }), React.createElement(\"div\", {\n        className: \"jsx-2066798145\" + \" \" + \"item_group\"\n      }, this.state.items && this.state.items.length > 0 && this.state.items.map(function (k, v) {\n        return React.createElement(\"div\", {\n          className: \"jsx-2066798145\" + \" \" + \"item_box\"\n        }, React.createElement(\"div\", {\n          className: \"jsx-2066798145\" + \" \" + \"item_image\"\n        }), React.createElement(\"div\", {\n          className: \"jsx-2066798145\" + \" \" + \"item_content\"\n        }), React.createElement(\"div\", {\n          className: \"jsx-2066798145\" + \" \" + \"clear\"\n        }));\n      }))), React.createElement(_JSXStyle, {\n        id: \"2066798145\"\n      }, \".content_box.jsx-2066798145{height:calc(100% - 44px);overflow-x:hidden;overflow-y:auto;}.content_page.jsx-2066798145{padding:8px;}.add_but.jsx-2066798145{float:right;padding:4px 12px 4px 12px;background-color:#006;color:#FFF;border-radius:8px;cursor:pointer;margin-left:12px;}.table_header.jsx-2066798145{float:left;}.filter_box.jsx-2066798145{float:left;}.myselect.jsx-2066798145{font-size:15px;border:2px solid #d3d3d5;background-color:#f3f3f5;border-radius:0px;-webkit-border-radius:0px;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-appearance:none;outline:none;position:relative;text-align:left;z-index:99;line-height:20px;padding:0px 36px 0px 8px;background:url(/static/images/select_arrow.png) no-repeat right #fff;}.clear.jsx-2066798145{clear:both;}.item_group.jsx-2066798145{margin-top:12px;}.item_box.jsx-2066798145{margin:0px 8px 8px 8px;padding:8px;border-radius:8px;background-color:#f3f3f5;}.item_image.jsx-2066798145{float:left;width:100px;height:133px;background-image:url(http://kaiapp.com/bitazza/upload/pic_1561855459834.jpg);background-size:cover;border:1px solid #b3b3b3;margin-right:8px;display:block;}.item_content.jsx-2066798145{float:left;width:calc(100% - 124px);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYWkvRGVza3RvcC9iaXRhenphL2JpdGF6emFfdGVzdC9wYWdlcy9hZG1pbi9uZXdzX2xpc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBOEc0QixBQUdpRCxBQUtiLEFBR0EsQUFTRCxBQUdBLEFBR0ksQUFnQkosQUFHSyxBQUdPLEFBTVosQUFVQSxXQTNDZCxBQUdBLEFBbUJBLEFBWWUsQUFVYSxDQXhENUIsQUFHNkIsR0FlRCxDQW1CNUIsT0FHZSxBQU9DLEVBcERLLFVBOENBLENBTzJELEFBU2hGLEVBckR5QixFQWVHLEdBdkJULFVBOENTLE1BN0M1QixDQVFjLEtBZU8sTUFkQSxPQXFDckIsS0F0QjZCLE1BZFgsZUFDRSxLQWNELElBMkJNLFFBeEN6QixjQXlDNEIseUJBQ1IsVUE1QlEsT0E2QlgsY0FDakIsR0E3QmdCLGFBQ00sa0JBQ0gsZ0JBQ0osV0FDSyxpQkFDUSx5QkFDNEMscUVBQ3hFIiwiZmlsZSI6Ii9Vc2Vycy9rYWkvRGVza3RvcC9iaXRhenphL2JpdGF6emFfdGVzdC9wYWdlcy9hZG1pbi9uZXdzX2xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xuaW1wb3J0IGpzQ29va2llIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgcXMgZnJvbSAncXVlcnlzdHJpbmcnO1xuXG5jbGFzcyBOZXdzTGlzdCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXRlbXMgOiBbXSxcbiAgICAgICAgICAgIGRhdGVzIDogWydBbGwnXVxuICAgICAgICB9O1xuICAgICAgICBqc0Nvb2tpZS5zZXQoJ2RhdGVfZmlsdGVyJywgJzAnKTtcbiAgICB9O1xuICAgIFxuICAgIHVwZGF0ZUl0ZW1zID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnaGVyZTE1Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuaXRlbXMpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmRhdGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2hlcmUxNicpO1xuICAgIH1cbiAgICAgICAgXG4gICAgZ2V0TGlzdCA9ICgpID0+IHtcbiAgICAgICAgdmFyIGluc3QgPSB0aGlzO1xuICAgICAgICAoXG4gICAgICAgICAgICBhc3luYyBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVfZmlsdGVyID0ganNDb29raWUuZ2V0KCdkYXRlX2ZpbHRlcicpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YoZGF0ZV9maWx0ZXIpID09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVfZmlsdGVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzQ29va2llLnNldCgnZGF0ZV9maWx0ZXInLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2luZG93LmZldGNoKCcvbmV3cz9kYXRlX2ZpbHRlcj17ZGF0ZV9maWx0ZXJ9Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04J31cbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3V0cHV0IH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvdXRwdXQuc3RhdHVzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LnNldFN0YXRlKHsgaXRlbXMgOiBvdXRwdXQucmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZGF0ZXMgPSBbJ0FsbCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGVfZmlsdGVyID09ICcwJyAmJiBpbnN0LnN0YXRlLml0ZW1zLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaW5zdC5zdGF0ZS5pdGVtcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGluc3Quc3RhdGUuaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbV9kdCA9IGl0ZW0ucHVibGlzaF9kYXRlLnJlcGxhY2UoL1QvLCAnICcpLnJlcGxhY2UoL1xcLi4rLywgJycpLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZGF0ZXMuaW5kZXhPZihpdGVtX2R0WzBdKSA9PSAtMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmRhdGVzLnB1c2goaXRlbV9kdFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5zZXRTdGF0ZSh7IGRhdGVzIDogbmRhdGVzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUxNCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LnVwZGF0ZUl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTGlzdCBOZXdzIGZhaWxlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMaXN0IE5ld3MgZmFpbGVkLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy99IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdJbXBsZW1lbnRhdGlvbiBvciBOZXR3b3JrIGVycm9yLicpO1xuICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfVxuICAgICAgICApKHRoaXMpO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgIGlmKGUudGFyZ2V0Lm5hbWUgPT0gJ2RhdGVfZmlsdGVyJyl7XG4gICAgICAgICAgICBqc0Nvb2tpZS5zZXQoJ2RhdGVfZmlsdGVyJywgZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FkbWluJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgYWRkTmV3c0NsaWNrID0gKCkgPT4ge1xuICAgICAgICBqc0Nvb2tpZS5zZXQoJ2FjdGlvbicsICdhZGRfbmV3cycpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWRtaW4nO1xuICAgIH07XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgfVxuICAgIFxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRfYm94XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50X3BhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJsZV9oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsdGVyX2JveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT1cIm15c2VsZWN0XCIgbmFtZT1cImRhdGVfZmlsdGVyXCIgb25DaGFuZ2U9e2UgPT4gdGhpcy5oYW5kbGVDaGFuZ2UoZSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGVzICYmIHRoaXMuc3RhdGUuZGF0ZXMubGVuZ3RoID4gMCAmJiB0aGlzLnN0YXRlLmRhdGVzLm1hcCgoaywgdikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihrICE9ICdBbGwnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8b3B0aW9uIHZhbHVlPVwie2t9XCI+e2t9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxvcHRpb24gdmFsdWU9XCIwXCI+QWxsPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17dGhpcy5hZGROZXdzQ2xpY2t9IGNsYXNzTmFtZT1cImFkZF9idXRcIj4rIEFkZCBOZXdzPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsZWFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsZWFyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaXRlbV9ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXRlbXMgJiYgdGhpcy5zdGF0ZS5pdGVtcy5sZW5ndGggPiAwICYmIHRoaXMuc3RhdGUuaXRlbXMubWFwKChrLCB2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiaXRlbV9ib3hcIj48ZGl2IGNsYXNzTmFtZT1cIml0ZW1faW1hZ2VcIj48L2Rpdj48ZGl2IGNsYXNzTmFtZT1cIml0ZW1fY29udGVudFwiPjwvZGl2PjxkaXYgY2xhc3NOYW1lPVwiY2xlYXJcIj48L2Rpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50X2JveHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDpjYWxjKDEwMCUgLSA0NHB4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6aGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTphdXRvO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50X3BhZ2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjhweDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAuYWRkX2J1dHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzo0cHggMTJweCA0cHggMTJweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzAwNjsgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjojRkZGO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OjEycHg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLnRhYmxlX2hlYWRlcntcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcl9ib3h7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDpsZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5teXNlbGVjdHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCAjZDNkM2Q1O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojZjNmM2Y1OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6MHB4OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czowcHg7IFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZWFyYW5jZTpub25lOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOm5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjIwcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjBweCAzNnB4IDBweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnVybCgvc3RhdGljL2ltYWdlcy9zZWxlY3RfYXJyb3cucG5nKSBuby1yZXBlYXQgcmlnaHQgI2ZmZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAuY2xlYXJ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcjpib3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5pdGVtX2dyb3Vwe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDoxMnB4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5pdGVtX2JveHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjowcHggOHB4IDhweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6OHB4OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6I2YzZjNmNTsgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLml0ZW1faW1hZ2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDpsZWZ0OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMHB4OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMzNweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwOi8va2FpYXBwLmNvbS9iaXRhenphL3VwbG9hZC9waWNfMTU2MTg1NTQ1OTgzNC5qcGcpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICNiM2IzYjM7IFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OjhweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAuaXRlbV9jb250ZW50e1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6bGVmdDsgXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDpjYWxjKDEwMCUgLSAxMjRweCk7IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmV3c0xpc3QiXX0= */\\n/*@ sourceURL=/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_list.js */\"));\n    }\n  }]);\n\n  return NewsList;\n}(Component);\n\nexport default NewsList;","map":{"version":3,"sources":["/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_list.js"],"names":["Component","Link","jsCookie","qs","NewsList","props","console","log","state","items","dates","inst","date_filter","get","set","window","fetch","method","headers","response","ok","json","output","status","setState","result","ndates","length","i","item","item_dt","publish_date","replace","split","indexOf","push","updateItems","e","target","name","value","location","href","getList","handleChange","map","k","v","addNewsClick"],"mappings":";;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,EAAP,MAAe,aAAf;;IAEMC,Q;;;;;AAEF,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,kFAAMA,KAAN;;AADe,kEASL,YAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWC,KAAvB;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWE,KAAvB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,KAdkB;;AAAA,8DAgBT,YAAM;AACZ,UAAII,IAAI,gCAAR;;AACA;AAAA;AAAA,+BACI;AAAA;;AAAA;AAAA;AAAA;AAAA;AACI;AACQC,gBAAAA,WAFZ,GAE0BV,QAAQ,CAACW,GAAT,CAAa,aAAb,CAF1B;;AAGQ,oBAAG,OAAOD,WAAP,IAAuB,WAA1B,EAAsC;AAClCA,kBAAAA,WAAW,GAAG,CAAd;AACAV,kBAAAA,QAAQ,CAACY,GAAT,CAAa,aAAb,EAA4B,GAA5B;AACH;;AANT;AAAA,uBAO+BC,MAAM,CAACC,KAAP,CAAa,iCAAb,EAAgD;AACnEC,kBAAAA,MAAM,EAAE,KAD2D;AAEnEC,kBAAAA,OAAO,EAAE;AAAC,oCAAgB;AAAjB;AAF0D,iBAAhD,CAP/B;;AAAA;AAOcC,gBAAAA,QAPd;;AAAA,qBAYYA,QAAQ,CAACC,EAZrB;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAaqCD,QAAQ,CAACE,IAAT,EAbrC;;AAAA;AAAA;AAaoBC,gBAAAA,MAbpB,SAaoBA,MAbpB;;AAcY,oBAAGA,MAAM,CAACC,MAAV,EAAiB;AACbZ,kBAAAA,IAAI,CAACa,QAAL,CAAc;AAAEf,oBAAAA,KAAK,EAAGa,MAAM,CAACG;AAAjB,mBAAd;AACIC,kBAAAA,MAFS,GAEA,CAAC,KAAD,CAFA;;AAGb,sBAAGd,WAAW,IAAI,GAAf,IAAsBD,IAAI,CAACH,KAAL,CAAWC,KAAX,CAAiBkB,MAAjB,GAA0B,CAAnD,EAAqD;AACjD,yBAAQC,CAAR,GAAY,CAAZ,EAAeA,CAAC,GAAGjB,IAAI,CAACH,KAAL,CAAWC,KAAX,CAAiBkB,MAApC,EAA4CC,CAAC,EAA7C,EAAgD;AACxCC,sBAAAA,IADwC,GACjClB,IAAI,CAACH,KAAL,CAAWC,KAAX,CAAiBmB,CAAjB,CADiC;AAExCE,sBAAAA,OAFwC,GAE9BD,IAAI,CAACE,YAAL,CAAkBC,OAAlB,CAA0B,GAA1B,EAA+B,GAA/B,EAAoCA,OAApC,CAA4C,MAA5C,EAAoD,EAApD,EAAwDC,KAAxD,CAA8D,GAA9D,CAF8B;;AAG5C,0BAAGP,MAAM,CAACQ,OAAP,CAAeJ,OAAO,CAAC,CAAD,CAAtB,KAA8B,CAAC,CAAlC,EAAoC;AAChCJ,wBAAAA,MAAM,CAACS,IAAP,CAAYL,OAAO,CAAC,CAAD,CAAnB;AACH;AACJ;;AACDnB,oBAAAA,IAAI,CAACa,QAAL,CAAc;AAAEd,sBAAAA,KAAK,EAAGgB;AAAV,qBAAd;AACRpB,oBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACK;;AACDI,kBAAAA,IAAI,CAACyB,WAAL;AACH,iBAfD,MAeK;AACD9B,kBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;;AA/Bb;AAAA;;AAAA;AAiCYD,gBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AAjCZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAyCH,KA3DkB;;AAAA,mEA6DJ,UAAC8B,CAAD,EAAO;AAClB,UAAGA,CAAC,CAACC,MAAF,CAASC,IAAT,IAAiB,aAApB,EAAkC;AAC9BrC,QAAAA,QAAQ,CAACY,GAAT,CAAa,aAAb,EAA4BuB,CAAC,CAACC,MAAF,CAASE,KAArC;AACAzB,QAAAA,MAAM,CAAC0B,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH;AACJ,KAlEkB;;AAAA,mEAoEJ,YAAM;AACjBxC,MAAAA,QAAQ,CAACY,GAAT,CAAa,QAAb,EAAuB,UAAvB;AACAC,MAAAA,MAAM,CAAC0B,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH,KAvEkB;;AAEf,UAAKlC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAG,EADC;AAETC,MAAAA,KAAK,EAAG,CAAC,KAAD;AAFC,KAAb;AAIAR,IAAAA,QAAQ,CAACY,GAAT,CAAa,aAAb,EAA4B,GAA5B;AANe;AAOlB;;;;wCAkEmB;AAChB,WAAK6B,OAAL;AACH;;;6BAEQ;AAAA;;AACP,aACM;AAAA,4CAAe;AAAf,SACI;AAAA,4CAAe;AAAf,SACI;AAAA,4CAAe;AAAf,SACI;AAAA,4CAAe;AAAf,SACE;AAA6B,QAAA,IAAI,EAAC,aAAlC;AAAgD,QAAA,QAAQ,EAAE,kBAAAN,CAAC;AAAA,iBAAI,MAAI,CAACO,YAAL,CAAkBP,CAAlB,CAAJ;AAAA,SAA3D;AAAA,4CAAkB;AAAlB,SACG,KAAK7B,KAAL,CAAWE,KAAX,IAAoB,KAAKF,KAAL,CAAWE,KAAX,CAAiBiB,MAAjB,GAA0B,CAA9C,IAAmD,KAAKnB,KAAL,CAAWE,KAAX,CAAiBmC,GAAjB,CAAqB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC/E,YAAGD,CAAC,IAAI,KAAR,EAAc;AACV,iBAAO;AAAQ,YAAA,KAAK,EAAC,KAAd;AAAA;AAAA,aAAqBA,CAArB,CAAP;AACH,SAFD,MAEK;AACD,iBAAO;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA,mBAAP;AACH;AACJ,OANmD,CADtD,CADF,CADJ,EAYI;AAAK,QAAA,OAAO,EAAE,KAAKE,YAAnB;AAAA,4CAA2C;AAA3C,sBAZJ,EAaI;AAAA,4CAAe;AAAf,QAbJ,CADJ,EAgBI;AAAA,4CAAe;AAAf,QAhBJ,EAiBI;AAAA,4CAAe;AAAf,SACK,KAAKxC,KAAL,CAAWC,KAAX,IAAoB,KAAKD,KAAL,CAAWC,KAAX,CAAiBkB,MAAjB,GAA0B,CAA9C,IAAmD,KAAKnB,KAAL,CAAWC,KAAX,CAAiBoC,GAAjB,CAAqB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC/E,eAAO;AAAA,8CAAe;AAAf,WAA0B;AAAA,8CAAe;AAAf,UAA1B,EAA4D;AAAA,8CAAe;AAAf,UAA5D,EAAgG;AAAA,8CAAe;AAAf,UAAhG,CAAP;AACH,OAFmD,CADxD,CAjBJ,CADJ;AAAA;AAAA,qhXADN;AA8FD;;;;EA9KkB/C,S;;AAiLvB,eAAeI,QAAf","sourcesContent":["import { Component } from 'react';\nimport Link from 'next/link';\nimport jsCookie from 'js-cookie';\nimport qs from 'querystring';\n\nclass NewsList extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            items : [],\n            dates : ['All']\n        };\n        jsCookie.set('date_filter', '0');\n    };\n    \n    updateItems = () => {\n        console.log('here15');\n        console.log(this.state.items);\n        console.log(this.state.dates);\n        console.log('here16');\n    }\n        \n    getList = () => {\n        var inst = this;\n        (\n            async function(){\n                //try {\n                    var date_filter = jsCookie.get('date_filter');\n                    if(typeof(date_filter) == 'undefined'){\n                        date_filter = 0;\n                        jsCookie.set('date_filter', '0');\n                    }\n                    const response = await window.fetch('/news?date_filter={date_filter}', {\n                        method: 'get',\n                        headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}\n                    })\n\n                    if (response.ok) {\n                        const { output } = await response.json();\n                        if(output.status){\n                            inst.setState({ items : output.result });\n                            var ndates = ['All'];\n                            if(date_filter == '0' && inst.state.items.length > 0){\n                                for(var i = 0; i < inst.state.items.length; i++){\n                                    var item = inst.state.items[i];\n                                    var item_dt = item.publish_date.replace(/T/, ' ').replace(/\\..+/, '').split(' ');\n                                    if(ndates.indexOf(item_dt[0]) == -1){\n                                        ndates.push(item_dt[0]);\n                                    }\n                                }\n                                inst.setState({ dates : ndates });\n                        console.log('here14');\n                            }\n                            inst.updateItems();\n                        }else{\n                            console.log('List News failed.');\n                        }\n                    } else {\n                        console.log('List News failed.');\n                    }\n                //} catch (error) {\n                    //console.log('Implementation or Network error.');\n                //}\n            }\n        )(this);\n    }\n\n    handleChange = (e) => {\n        if(e.target.name == 'date_filter'){\n            jsCookie.set('date_filter', e.target.value);\n            window.location.href = '/admin';\n        }\n    };\n    \n    addNewsClick = () => {\n        jsCookie.set('action', 'add_news');\n        window.location.href = '/admin';\n    };\n\n    componentDidMount() {\n        this.getList();\n    }\n    \n    render() {\n      return (\n            <div className=\"content_box\">\n                <div className=\"content_page\">\n                    <div className=\"table_header\">\n                        <div className=\"filter_box\">\n                          <select className=\"myselect\" name=\"date_filter\" onChange={e => this.handleChange(e)}>\n                            {this.state.dates && this.state.dates.length > 0 && this.state.dates.map((k, v) => {\n                                if(k != 'All'){\n                                    return <option value=\"{k}\">{k}</option>\n                                }else{\n                                    return <option value=\"0\">All</option>\n                                }\n                            })}\n                          </select>\n                        </div>\n                        <div onClick={this.addNewsClick} className=\"add_but\">+ Add News</div>\n                        <div className=\"clear\"></div>\n                    </div>\n                    <div className=\"clear\"></div>\n                    <div className=\"item_group\">\n                        {this.state.items && this.state.items.length > 0 && this.state.items.map((k, v) => {\n                            return <div className=\"item_box\"><div className=\"item_image\"></div><div className=\"item_content\"></div><div className=\"clear\"></div></div>\n                        })}\n                    </div>\n                </div>\n                <style jsx>{`\n                    .content_box{\n                        height:calc(100% - 44px);\n                        overflow-x:hidden;\n                        overflow-y:auto;\n                    }\n                    .content_page{\n                        padding:8px;\n                    }\n                    .add_but{\n                        float:right;\n                        padding:4px 12px 4px 12px;\n                        background-color:#006; \n                        color:#FFF;\n                        border-radius:8px;\n                        cursor:pointer;\n                        margin-left:12px;\n                    }\n                    .table_header{\n                        float:left;\n                    }\n                    .filter_box{\n                        float:left;\n                    }\n                    .myselect{\n                        font-size:15px;\n                        border:2px solid #d3d3d5;\n                        background-color:#f3f3f5; \n                        border-radius:0px; \n                        -webkit-border-radius:0px; \n                        appearance:none; \n                        -webkit-appearance: none; \n                        outline:none;\n                        position: relative;\n                        text-align:left;\n                        z-index: 99;\n                        line-height:20px;\n                        padding:0px 36px 0px 8px;\n                        background:url(/static/images/select_arrow.png) no-repeat right #fff;\n                    }\n                    .clear{\n                        clear:both;\n                    }\n                    .item_group{\n                        margin-top:12px;\n                    }\n                    .item_box{\n                        margin:0px 8px 8px 8px;\n                        padding:8px;\n                        border-radius:8px; \n                        background-color:#f3f3f5; \n                    }\n                    .item_image{\n                        float:left; \n                        width:100px; \n                        height:133px; \n                        background-image:url(http://kaiapp.com/bitazza/upload/pic_1561855459834.jpg); \n                        background-size:cover; \n                        border:1px solid #b3b3b3; \n                        margin-right:8px; \n                        display:block; \n                    }\n                    .item_content{\n                        float:left; \n                        width:calc(100% - 124px); \n                    }\n                `}</style>\n            </div>\n      );\n    }\n}\n\nexport default NewsList"]},"metadata":{},"sourceType":"module"}