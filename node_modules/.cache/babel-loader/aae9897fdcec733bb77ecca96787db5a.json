{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport { Component } from 'react';\n\nvar NewsAdd =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewsAdd, _Component);\n\n  function NewsAdd(props) {\n    var _this;\n\n    _classCallCheck(this, NewsAdd);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsAdd).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submitClick\", function () {\n      console.log(_this.state);\n\n      var inst = _assertThisInitialized(_this);\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, _ref2, output;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return window.fetch('http://localhost:3000/admin/news', {\n                  method: 'post',\n                  headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n                  },\n                  body: qs.stringify(inst.state)\n                });\n\n              case 3:\n                response = _context.sent;\n\n                if (!response.ok) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 7;\n                return response.json();\n\n              case 7:\n                _ref2 = _context.sent;\n                output = _ref2.output;\n\n                if (output.status) {\n                  jsCookie.set('action', 'news_list');\n                  window.location.href = '/admin';\n                } else {\n                  console.log('Login failed.');\n                }\n\n                _context.next = 13;\n                break;\n\n              case 12:\n                console.log('Login failed.');\n\n              case 13:\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](0);\n                console.log('Implementation or Network error.');\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 15]]);\n      }))(_assertThisInitialized(_this));\n    });\n\n    _this.state = {\n      title: '',\n      images: [],\n      description: ''\n    };\n    return _this;\n  }\n\n  _createClass(NewsAdd, [{\n    key: \"handleUpload\",\n    value: function () {\n      var _handleUpload = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        var image, filesUpload, allImages, data;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                image = this.state.image;\n                filesUpload = e.target.files;\n                allImages = _Object$keys(filesUpload).map(\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2(key) {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            return _context2.abrupt(\"return\", new _Promise(function (resolve, reject) {\n                              var reader = new FileReader();\n                              reader.readAsDataURL(filesUpload[key]);\n\n                              reader.onload = function () {\n                                var dataURI = reader.result;\n                                var base64 = dataURI.replace(/^[^,]+,/, '');\n                                var byteCharacters = atob(base64);\n                                var byteNumbers = new Uint8Array(byteCharacters.length);\n\n                                for (var i = 0; i < byteCharacters.length; i++) {\n                                  byteNumbers[i] = byteCharacters.charCodeAt(i);\n                                }\n\n                                var blob = new Blob([byteNumbers], {\n                                  type: 'image/jpeg'\n                                });\n                                var urlCreator = window.URL || window.webkitURL;\n                                var imageUrl = urlCreator.createObjectURL(blob);\n                                var imageDetail = {\n                                  url: imageUrl,\n                                  fileUpload: filesUpload[key]\n                                };\n                                resolve(imageDetail);\n                              };\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                _context3.next = 5;\n                return _Promise.all(allImages);\n\n              case 5:\n                data = _context3.sent;\n                this.setState({\n                  images: images.concat(data)\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleUpload(_x) {\n        return _handleUpload.apply(this, arguments);\n      }\n\n      return handleUpload;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"jsx-251057281\" + \" \" + \"content_box\"\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n        },\n        className: \"jsx-251057281\"\n      }, React.createElement(\"table\", {\n        border: \"0\",\n        align: \"center\",\n        cellPadding: \"8\",\n        cellSpacing: \"0\",\n        className: \"jsx-251057281\"\n      }, React.createElement(\"tbody\", {\n        className: \"jsx-251057281\"\n      }, React.createElement(\"tr\", {\n        className: \"jsx-251057281\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-251057281\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-251057281\" + \" \" + \"fdesc\"\n      }, \"Title\"), React.createElement(\"input\", {\n        name: \"title\",\n        type: \"text\",\n        maxLength: \"16\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e);\n        },\n        className: \"jsx-251057281\" + \" \" + \"tf\"\n      }))), React.createElement(\"tr\", {\n        className: \"jsx-251057281\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-251057281\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-251057281\" + \" \" + \"fdesc\"\n      }, \"Cover Image\"), React.createElement(\"input\", {\n        type: \"file\",\n        name: \"uploadAwsS3\",\n        onChange: this.handleUpload.bind(this),\n        accept: \"image/*\",\n        className: \"jsx-251057281\"\n      }))), React.createElement(\"tr\", {\n        className: \"jsx-251057281\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-251057281\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-251057281\" + \" \" + \"fdesc\"\n      }, \"Description\"), React.createElement(\"textarea\", {\n        name: \"description\",\n        cols: \"\",\n        rows: \"5\",\n        wrap: \"virtual\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e);\n        },\n        className: \"jsx-251057281\" + \" \" + \"ta\"\n      }))), React.createElement(\"tr\", {\n        className: \"jsx-251057281\"\n      }, React.createElement(\"td\", {\n        align: \"left\",\n        valign: \"top\",\n        className: \"jsx-251057281\"\n      }, React.createElement(\"a\", {\n        onClick: this.submitClick,\n        className: \"jsx-251057281\" + \" \" + \"submit_button\"\n      }, \"Submit\")))))), React.createElement(_JSXStyle, {\n        id: \"251057281\"\n      }, \".content_box.jsx-251057281{height:calc(100% - 60px);padding:8px;}.submit_button.jsx-251057281{padding:4px 12px 4px 12px;background-color:#006;color:#FFF;border-radius:8px;cursor:pointer;}.tf.jsx-251057281{width:300px;font-size:15px;padding:4px 12px 4px 12px;border-radius:8px;}.ta.jsx-251057281{width:300px;font-size:15px;padding:4px 12px 4px 12px;border-radius:8px;}.fdesc.jsx-251057281{font-size:12px;color:#CCCCCC;margin:4px 0px 4px 0px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYWkvRGVza3RvcC9iaXRhenphL2JpdGF6emFfdGVzdC9wYWdlcy9hZG1pbi9uZXdzX2FkZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtSW9CLEFBR3lDLEFBSUMsQUFPZCxBQU1BLEFBTUcsWUFYQSxBQU1BLEdBTUQsVUF2QkYsQ0FJVSxDQVFJLEFBTUEsRUFNSCxRQXZCMUIsV0FJYyxJQW9CZCxDQVpxQixBQU1BLE1BYkEsWUFRckIsQUFNQSxNQWJrQixlQUNsQiIsImZpbGUiOiIvVXNlcnMva2FpL0Rlc2t0b3AvYml0YXp6YS9iaXRhenphX3Rlc3QvcGFnZXMvYWRtaW4vbmV3c19hZGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcblxuY2xhc3MgTmV3c0FkZCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgaW1hZ2VzOiBbXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgICAgICB9KVxuICAgIH07XG4gICAgXG4gICAgYXN5bmMgaGFuZGxlVXBsb2FkIChlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5zdGF0ZS5pbWFnZVxuICAgICAgICBjb25zdCBmaWxlc1VwbG9hZCA9IGUudGFyZ2V0LmZpbGVzXG4gICAgICAgIGNvbnN0IGFsbEltYWdlcyA9IE9iamVjdC5rZXlzKGZpbGVzVXBsb2FkKS5tYXAoYXN5bmMga2V5ID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVzVXBsb2FkW2tleV0pXG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICBsZXQgZGF0YVVSSSA9IHJlYWRlci5yZXN1bHRcbiAgICAgICAgICAgICAgbGV0IGJhc2U2NCA9IGRhdGFVUkkucmVwbGFjZSgvXlteLF0rLC8sICcnKVxuICAgICAgICAgICAgICBsZXQgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NClcbiAgICAgICAgICAgICAgbGV0IGJ5dGVOdW1iZXJzID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKVxuXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IGJ5dGVDaGFyYWN0ZXJzLmNoYXJDb2RlQXQoaSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtieXRlTnVtYmVyc10sIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pXG4gICAgICAgICAgICAgIGxldCB1cmxDcmVhdG9yID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMXG4gICAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IHVybENyZWF0b3IuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXG4gICAgICAgICAgICAgIGxldCBpbWFnZURldGFpbCA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IGltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGZpbGVVcGxvYWQ6IGZpbGVzVXBsb2FkW2tleV1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKGltYWdlRGV0YWlsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChhbGxJbWFnZXMpXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWFnZXM6IGltYWdlcy5jb25jYXQoZGF0YSkgfSlcbiAgICAgIH1cbiAgICBcbiAgICBzdWJtaXRDbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGF0ZSk7XG4gICAgICAgIGxldCBpbnN0ID0gdGhpcztcbiAgICAgICAgKFxuICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3aW5kb3cuZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hZG1pbi9uZXdzJywge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnfSxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogcXMuc3RyaW5naWZ5KGluc3Quc3RhdGUpXG4gICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvdXRwdXQgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICAgICAgICAgICAgICBpZihvdXRwdXQuc3RhdHVzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzQ29va2llLnNldCgnYWN0aW9uJywgJ25ld3NfbGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FkbWluJztcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gZmFpbGVkLicpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBmYWlsZWQuJylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ltcGxlbWVudGF0aW9uIG9yIE5ldHdvcmsgZXJyb3IuJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICkodGhpcyk7XG4gICAgfVxuICAgIFxuICAgIHJlbmRlciAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50X2JveFwiPlxuICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgYm9yZGVyPVwiMFwiIGFsaWduPVwiY2VudGVyXCIgY2VsbFBhZGRpbmc9XCI4XCIgY2VsbFNwYWNpbmc9XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBhbGlnbj1cImxlZnRcIiB2YWxpZ249XCJ0b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZkZXNjXCI+VGl0bGU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0aXRsZVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZlwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9XCIxNlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuaGFuZGxlQ2hhbmdlKGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGFsaWduPVwibGVmdFwiIHZhbGlnbj1cInRvcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmRlc2NcIj5Db3ZlciBJbWFnZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdmaWxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSd1cGxvYWRBd3NTMydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVXBsb2FkLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdD0naW1hZ2UvKidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBhbGlnbj1cImxlZnRcIiB2YWxpZ249XCJ0b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZkZXNjXCI+RGVzY3JpcHRpb248L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzPVwiXCIgcm93cz1cIjVcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcD1cInZpcnR1YWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLmhhbmRsZUNoYW5nZShlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQgYWxpZ249XCJsZWZ0XCIgdmFsaWduPVwidG9wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5zdWJtaXRDbGlja30gY2xhc3NOYW1lPVwic3VibWl0X2J1dHRvblwiPlN1Ym1pdDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAgIC5jb250ZW50X2JveHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6Y2FsYygxMDAlIC0gNjBweCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzo4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuc3VibWl0X2J1dHRvbntcbiAgICAgICAgICAgICAgICBwYWRkaW5nOjRweCAxMnB4IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzAwNjsgXG4gICAgICAgICAgICAgICAgY29sb3I6I0ZGRjtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjhweDtcbiAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC50ZntcbiAgICAgICAgICAgICAgICB3aWR0aDozMDBweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6MTVweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOjRweCAxMnB4IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6OHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnRhe1xuICAgICAgICAgICAgICAgIHdpZHRoOjMwMHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNXB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6NHB4IDEycHggNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZmRlc2N7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOjEycHg7XG4gICAgICAgICAgICAgICAgY29sb3I6I0NDQ0NDQztcbiAgICAgICAgICAgICAgICBtYXJnaW46NHB4IDBweCA0cHggMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZXdzQWRkIl19 */\\n/*@ sourceURL=/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_add.js */\"));\n    }\n  }]);\n\n  return NewsAdd;\n}(Component);\n\nexport default NewsAdd;","map":{"version":3,"sources":["/Users/kai/Desktop/bitazza/bitazza_test/pages/admin/news_add.js"],"names":["Component","NewsAdd","props","e","setState","target","name","value","console","log","state","inst","window","fetch","method","headers","body","qs","stringify","response","ok","json","output","status","jsCookie","set","location","href","title","images","description","image","filesUpload","files","allImages","map","key","resolve","reject","reader","FileReader","readAsDataURL","onload","dataURI","result","base64","replace","byteCharacters","atob","byteNumbers","Uint8Array","length","i","charCodeAt","blob","Blob","type","urlCreator","URL","webkitURL","imageUrl","createObjectURL","imageDetail","url","fileUpload","all","data","concat","preventDefault","handleChange","handleUpload","bind","submitClick"],"mappings":";;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;;IAEMC,O;;;;;AAEF,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,iFAAMA,KAAN;;AADe,mEASJ,UAACC,CAAD,EAAO;AAClB,YAAKC,QAAL,qBACKD,CAAC,CAACE,MAAF,CAASC,IADd,EACqBH,CAAC,CAACE,MAAF,CAASE,KAD9B;AAGH,KAbkB;;AAAA,kEA8CL,YAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;;AACA,UAAIC,IAAI,gCAAR;;AACA;AAAA;AAAA,+BACI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAE6BC,MAAM,CAACC,KAAP,CAAa,kCAAb,EAAiD;AACtEC,kBAAAA,MAAM,EAAE,MAD8D;AAEtEC,kBAAAA,OAAO,EAAE;AAAC,oCAAgB;AAAjB,mBAF6D;AAGtEC,kBAAAA,IAAI,EAAEC,EAAE,CAACC,SAAH,CAAaP,IAAI,CAACD,KAAlB;AAHgE,iBAAjD,CAF7B;;AAAA;AAEYS,gBAAAA,QAFZ;;AAAA,qBAQUA,QAAQ,CAACC,EARnB;AAAA;AAAA;AAAA;;AAAA;AAAA,uBASiCD,QAAQ,CAACE,IAAT,EATjC;;AAAA;AAAA;AASgBC,gBAAAA,MAThB,SASgBA,MAThB;;AAUQ,oBAAGA,MAAM,CAACC,MAAV,EAAiB;AACbC,kBAAAA,QAAQ,CAACC,GAAT,CAAa,QAAb,EAAuB,WAAvB;AACAb,kBAAAA,MAAM,CAACc,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACH,iBAHD,MAGK;AACDnB,kBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AAfT;AAAA;;AAAA;AAiBQD,gBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;;AAjBR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAoBMD,gBAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;;AApBN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAyBH,KA1EkB;;AAEf,UAAKC,KAAL,GAAa;AACTkB,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,MAAM,EAAE,EAFC;AAGTC,MAAAA,WAAW,EAAE;AAHJ,KAAb;AAFe;AAOlB;;;;;;;iDAQmB3B,C;;;;;;AACV4B,gBAAAA,K,GAAQ,KAAKrB,KAAL,CAAWqB,K;AACnBC,gBAAAA,W,GAAc7B,CAAC,CAACE,MAAF,CAAS4B,K;AACvBC,gBAAAA,S,GAAY,aAAYF,WAAZ,EAAyBG,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,2CAA6B,kBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA,8DACtC,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,kCAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,8BAAAA,MAAM,CAACE,aAAP,CAAqBT,WAAW,CAACI,GAAD,CAAhC;;AACAG,8BAAAA,MAAM,CAACG,MAAP,GAAgB,YAAM;AACpB,oCAAIC,OAAO,GAAGJ,MAAM,CAACK,MAArB;AACA,oCAAIC,MAAM,GAAGF,OAAO,CAACG,OAAR,CAAgB,SAAhB,EAA2B,EAA3B,CAAb;AACA,oCAAIC,cAAc,GAAGC,IAAI,CAACH,MAAD,CAAzB;AACA,oCAAII,WAAW,GAAG,IAAIC,UAAJ,CAAeH,cAAc,CAACI,MAA9B,CAAlB;;AAEA,qCAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,cAAc,CAACI,MAAnC,EAA2CC,CAAC,EAA5C,EAAgD;AAC9CH,kCAAAA,WAAW,CAACG,CAAD,CAAX,GAAiBL,cAAc,CAACM,UAAf,CAA0BD,CAA1B,CAAjB;AACD;;AACD,oCAAIE,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACN,WAAD,CAAT,EAAwB;AAAEO,kCAAAA,IAAI,EAAE;AAAR,iCAAxB,CAAX;AACA,oCAAIC,UAAU,GAAG7C,MAAM,CAAC8C,GAAP,IAAc9C,MAAM,CAAC+C,SAAtC;AACA,oCAAIC,QAAQ,GAAGH,UAAU,CAACI,eAAX,CAA2BP,IAA3B,CAAf;AACA,oCAAIQ,WAAW,GAAG;AAChBC,kCAAAA,GAAG,EAAEH,QADW;AAEhBI,kCAAAA,UAAU,EAAEhC,WAAW,CAACI,GAAD;AAFP,iCAAlB;AAIAC,gCAAAA,OAAO,CAACyB,WAAD,CAAP;AACD,+BAjBD;AAkBD,6BArBM,CADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA7B;;AAAA;AAAA;AAAA;AAAA,oB;;uBAwBC,SAAQG,GAAR,CAAY/B,SAAZ,C;;;AAAbgC,gBAAAA,I;AACN,qBAAK9D,QAAL,CAAc;AAAEyB,kBAAAA,MAAM,EAAEA,MAAM,CAACsC,MAAP,CAAcD,IAAd;AAAV,iBAAd;;;;;;;;;;;;;;;;;;6BAiCM;AAAA;;AACR,aACM;AAAA,2CAAe;AAAf,SACI;AAAM,QAAA,QAAQ,EAAE,kBAAA/D,CAAC,EAAI;AACbA,UAAAA,CAAC,CAACiE,cAAF;AACD,SAFP;AAAA;AAAA,SAGI;AAAO,QAAA,MAAM,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAC,QAAxB;AAAiC,QAAA,WAAW,EAAC,GAA7C;AAAiD,QAAA,WAAW,EAAC,GAA7D;AAAA;AAAA,SACE;AAAA;AAAA,SACA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,iBADJ,EAEI;AACI,QAAA,IAAI,EAAC,OADT;AAEI,QAAA,IAAI,EAAC,MAFT;AAII,QAAA,SAAS,EAAC,IAJd;AAKI,QAAA,QAAQ,EAAE,kBAAAjE,CAAC;AAAA,iBAAI,MAAI,CAACkE,YAAL,CAAkBlE,CAAlB,CAAJ;AAAA,SALf;AAAA,2CAGc;AAHd,QAFJ,CADF,CADA,EAaA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,uBADJ,EAEI;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,IAAI,EAAC,aAFT;AAGI,QAAA,QAAQ,EAAE,KAAKmE,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAHd;AAII,QAAA,MAAM,EAAC,SAJX;AAAA;AAAA,QAFJ,CADF,CAbA,EAwBA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAA,2CAAe;AAAf,uBADJ,EAEI;AACI,QAAA,IAAI,EAAC,aADT;AAGI,QAAA,IAAI,EAAC,EAHT;AAGY,QAAA,IAAI,EAAC,GAHjB;AAII,QAAA,IAAI,EAAC,SAJT;AAKI,QAAA,QAAQ,EAAE,kBAAApE,CAAC;AAAA,iBAAI,MAAI,CAACkE,YAAL,CAAkBlE,CAAlB,CAAJ;AAAA,SALf;AAAA,2CAEc;AAFd,QAFJ,CADF,CAxBA,EAoCA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA,SACI;AAAG,QAAA,OAAO,EAAE,KAAKqE,WAAjB;AAAA,2CAAwC;AAAxC,kBADJ,CADF,CApCA,CADF,CAHJ,CADJ;AAAA;AAAA,izRADN;AAkFD;;;;EAjKiBxE,S;;AAoKtB,eAAeC,OAAf","sourcesContent":["import { Component } from 'react'\n\nclass NewsAdd extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            title: '',\n            images: [],\n            description: ''\n        };\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    };\n    \n    async handleUpload (e) {\n        const image = this.state.image\n        const filesUpload = e.target.files\n        const allImages = Object.keys(filesUpload).map(async key => {\n          return new Promise((resolve, reject) => {\n            let reader = new FileReader()\n            reader.readAsDataURL(filesUpload[key])\n            reader.onload = () => {\n              let dataURI = reader.result\n              let base64 = dataURI.replace(/^[^,]+,/, '')\n              let byteCharacters = atob(base64)\n              let byteNumbers = new Uint8Array(byteCharacters.length)\n\n              for (var i = 0; i < byteCharacters.length; i++) {\n                byteNumbers[i] = byteCharacters.charCodeAt(i)\n              }\n              let blob = new Blob([byteNumbers], { type: 'image/jpeg' })\n              let urlCreator = window.URL || window.webkitURL\n              let imageUrl = urlCreator.createObjectURL(blob)\n              let imageDetail = {\n                url: imageUrl,\n                fileUpload: filesUpload[key]\n              }\n              resolve(imageDetail)\n            }\n          })\n        })\n        const data = await Promise.all(allImages)\n        this.setState({ images: images.concat(data) })\n      }\n    \n    submitClick = () => {\n        console.log(this.state);\n        let inst = this;\n        (\n            async function(){\n                try {\n                  const response = await window.fetch('http://localhost:3000/admin/news', {\n                    method: 'post',\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'},\n                    body: qs.stringify(inst.state)\n                  })\n\n                  if (response.ok) {\n                    const { output } = await response.json()\n                    if(output.status){\n                        jsCookie.set('action', 'news_list');\n                        window.location.href = '/admin';\n                    }else{\n                        console.log('Login failed.')\n                    }\n                  } else {\n                    console.log('Login failed.')\n                  }\n                } catch (error) {\n                  console.log('Implementation or Network error.')\n                }\n            }\n        )(this);\n    }\n    \n    render () {\n      return (\n            <div className=\"content_box\">\n                <form onSubmit={e => {\n                        e.preventDefault()\n                      }}>\n                    <table border=\"0\" align=\"center\" cellPadding=\"8\" cellSpacing=\"0\">\n                      <tbody>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Title</div>\n                            <input \n                                name=\"title\" \n                                type=\"text\" \n                                className=\"tf\" \n                                maxLength=\"16\"\n                                onChange={e => this.handleChange(e)}\n                            />\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Cover Image</div>\n                            <input\n                                type='file'\n                                name='uploadAwsS3'\n                                onChange={this.handleUpload.bind(this)}\n                                accept='image/*'\n                            />\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <div className=\"fdesc\">Description</div>\n                            <textarea \n                                name=\"description\" \n                                className=\"ta\" \n                                cols=\"\" rows=\"5\" \n                                wrap=\"virtual\"\n                                onChange={e => this.handleChange(e)}\n                            ></textarea>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td align=\"left\" valign=\"top\">\n                            <a onClick={this.submitClick} className=\"submit_button\">Submit</a>\n                        </td>\n                      </tr>\n                      </tbody>\n                    </table>\n              </form>\n        <style jsx>{`\n            .content_box{\n                height:calc(100% - 60px);\n                padding:8px;\n            }\n            .submit_button{\n                padding:4px 12px 4px 12px;\n                background-color:#006; \n                color:#FFF;\n                border-radius:8px;\n                cursor:pointer;\n            }\n            .tf{\n                width:300px;\n                font-size:15px;\n                padding:4px 12px 4px 12px;\n                border-radius:8px;\n            }\n            .ta{\n                width:300px;\n                font-size:15px;\n                padding:4px 12px 4px 12px;\n                border-radius:8px;\n            }\n            .fdesc{\n                font-size:12px;\n                color:#CCCCCC;\n                margin:4px 0px 4px 0px;\n            }\n        `}</style>\n            </div>\n      );\n    }\n}\n\nexport default NewsAdd"]},"metadata":{},"sourceType":"module"}